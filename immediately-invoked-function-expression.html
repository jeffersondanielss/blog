<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="preload" href="undefined/page-component---src-templates-blog-post-js-efa1de622f3e7d5f36dc.js" as="script"/><link rel="preload" href="undefined/path---immediately-invoked-function-expression-html-6bbfe67ac1884cc30368.js" as="script"/><link rel="preload" href="undefined/layout-component---index-361cae719d33f26b490e.js" as="script"/><link rel="preload" href="undefined/app-777277602c1b720aab05.js" as="script"/><link rel="preload" href="undefined/commons-86508d60e97dde59b038.js" as="script"/><script id="webpack-manifest">
            //<![CDATA[
            window.webpackManifest = {"1":"layout-component---index-361cae719d33f26b490e.js","2":"page-component---src-templates-blog-post-js-efa1de622f3e7d5f36dc.js","3":"page-component---src-pages-index-js-977b131818f5102821ae.js","4":"page-component---src-templates-tags-js-d1e378a298a4b0acd87d.js","5":"path---tirando-maior-proveito-do-sass-html-c112ded8f58fff143550.js","6":"path---tags-b3ea2b613614ec165b88.js","7":"path---tags-sass-2987f40a133fa8654949.js","8":"path---tags-javascript-a93c9803b5c2ca983070.js","9":"path---tags-first-f335026ed82411303997.js","10":"path---tags-css-04d3c2d80216b291a1ac.js","11":"path---index-5501acce549a65d8a085.js","12":"path---immediately-invoked-function-expression-html-6bbfe67ac1884cc30368.js","13":"path---hello-world-html-f30710f26f12ba1cc754.js","14":"path---404-586c7e095e534a3909ec.js","15":"path---404-html-586c7e095e534a3909ec.js","16":"page-component---src-pages-404-js-714a6745554044a4d4d5.js","17":"app-777277602c1b720aab05.js"}
            //]]>
            </script><title data-react-helmet="true">Immediately invoked function expression</title><meta data-react-helmet="true" name="description" content="Desenvolvedor front-end"/><meta data-react-helmet="true" name="keywords" content="front-end"/><script>
  !function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",[
  "undefined/commons-86508d60e97dde59b038.js","undefined/app-777277602c1b720aab05.js","undefined/layout-component---index-361cae719d33f26b490e.js","undefined/path---immediately-invoked-function-expression-html-6bbfe67ac1884cc30368.js","undefined/page-component---src-templates-blog-post-js-efa1de622f3e7d5f36dc.js"
])
  </script><style>.logo{display:inline-block;text-decoration:none;position:relative;color:#fff;padding:15px 0;font-size:18px;font-family:Encode Sans}.blog-posts .title{font-size:22px}.blog-posts .title a{color:#1a1b1d}.blog-post-preview{margin-bottom:60px}.date{float:right;color:#444;font-size:16px}@media screen and (max-width:440px){.date{display:block;float:none;margin-top:10px;font-size:12px}}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.header{background-color:#1a1b1d;position:relative;box-shadow:0 2px 2px #c5c5c5}.header:after{content:"";position:absolute;bottom:0;height:2px;display:block;width:100%;background:-webkit-gradient(left top,right top,color-stop(0,#34c29c),color-stop(34%,#5bafce),color-stop(65%,#d5647b),color-stop(100%,#e4903d));background:linear-gradient(90deg,#34c29c 0,#5bafce 34%,#d5647b 65%,#e4903d)}.footer{background-color:#1a1b1d;font-size:12px;text-align:center;padding:10px}.footer,.footer-link{color:#fff}@font-face{font-family:Encode Sans;font-style:normal;font-weight:400;src:local("Encode Sans Regular"),local("EncodeSans-Regular"),url(https://fonts.gstatic.com/s/encodesans/v1/2zldBfvKXWNf1KMFLP1Frb6up8jxqWt8HVA3mDhkV_0.woff2) format("woff2");unicode-range:u+0102-0103,u+1ea0-1ef9,u+20ab}@font-face{font-family:Encode Sans;font-style:normal;font-weight:400;src:local("Encode Sans Regular"),local("EncodeSans-Regular"),url(https://fonts.gstatic.com/s/encodesans/v1/2zldBfvKXWNf1KMFLP1FrSYE0-AqJ3nfInTTiDXDjU4.woff2) format("woff2");unicode-range:u+0100-024f,u+1e??,u+20a0-20ab,u+20ad-20cf,u+2c60-2c7f,u+a720-a7ff}@font-face{font-family:Encode Sans;font-style:normal;font-weight:400;src:local("Encode Sans Regular"),local("EncodeSans-Regular"),url(https://fonts.gstatic.com/s/encodesans/v1/2zldBfvKXWNf1KMFLP1FrY4P5ICox8Kq3LLUNMylGO4.woff2) format("woff2");unicode-range:u+00??,u+0131,u+0152-0153,u+02c6,u+02da,u+02dc,u+2000-206f,u+2074,u+20ac,u+2212,u+2215}html{font-family:Encode Sans,sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}html{overflow-y:scroll}*,:after,:before,html{box-sizing:border-box}a{text-decoration:none}.wrapper{margin:0 auto;width:90%;max-width:900px}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="-849345087"><!-- react-empty: 2 --><div class="header" data-reactid="3"><div class="wrapper" data-reactid="4"><a class="logo" href="/undefined/" data-reactid="5">Jefferson Daniel</a></div></div><div class="wrapper" data-reactid="6"><div class="blog-post-container" data-reactid="7"><!-- react-empty: 8 --><div class="blog-post" data-reactid="9"><h1 class="title" data-reactid="10">Immediately invoked function expression</h1><h2 class="date" data-reactid="11">December 20, 2015</h2><div class="blog-post-content" data-reactid="12"><p>O IIFE ou Immediately-invoked function expression, é umas das formas de se declarar uma função no javascript, para entender melhor <strong>como uma variável pode receber um valor de uma IIFE</strong> temos que entender antes alguns conceitos.</p>
<p>O primeiro deles é como funciona a <strong>IIFE</strong>, que será a nossa função que retorna um valor, após isso temos que entender como funciona o <strong>Variable assignment</strong> que é a forma de atribuir uma função a nossa variável, e por fim, podemos juntar esses dois conceitos e criar nossa função auto executável que vai retornar um valor para nossa variável.</p>
<h3>IFFE (função auto executável)</h3>
<p>A função no javascript na sua sintax mais básica como: <strong>function functionName(){ /* code */ }</strong>, precisa obrigatoriamente ser chamada para que o bloco de código contida dentro dela seja executado. Uma alternativa para isso é o IIFE que ao mesmo tempo cria a função e já a executa na sequência.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">/* code */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>Algumas formas de criar uma IIFE:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<h3>Variable Assignment</h3>
<p>É a forma de criar uma função retornando um valor a uma variável, dessa forma a menos que essa função seja um IIFE ainda precisamos executar a função para que a variável receba o valor retornado dela.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token comment" spellcheck="true">// Função anônima atribuída a uma variável</span>
<span class="token keyword">var</span> soma <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> num1<span class="token punctuation">,</span> num2 <span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> operacao <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">adicao</span><span class="token punctuation">(</span> num1<span class="token punctuation">,</span> num2 <span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">soma</span><span class="token punctuation">(</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 10</span>
<span class="token function">adicao</span><span class="token punctuation">(</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// adicao is not defined</span>
</code></pre>
      </div>
<p>Legal, mas porque eu deveria aprender isso?</p>
<h3>Escopo</h3>
<p>As variáveis têm como escopo a função onde elas foram criadas, e como não queremos poluir o escopo global as variáveis criadas dentro da nossa IIFE só existem dentro dela.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'element'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> element <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// &lt; div id="element">...&lt;/ div></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> element <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// element is not defined</span>
</code></pre>
      </div>
<h3>Conflitos de libs</h3>
<p>Como muitas libs usam o <strong>$</strong> e é comum haver conflitos, apesar de ter outras alternativas como o <strong>noConflict()</strong> na IIFE você pode passar a referencia ao jQuery, ou qualquer outra lib como parâmetro:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span> $j <span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">facaAlgo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* code */</span> <span class="token punctuation">}</span>
  <span class="token function">$j</span><span class="token punctuation">(</span><span class="token string">'.element'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span> facaAlgo <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span> jQuery <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<h3>Performance</h3>
<p>Se você usa muitas vezes variáveis globais em seu código uma boa dica para performace é passar essas variáveis como parâmetro para que o interpretador não precise sair do escopo da sua função toda vez para ir buscar o valor daquela variável global.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span> doc <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> btn <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span>
      <span class="token punctuation">,</span> element <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'element'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span> document <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>Com a junção desses dois conceitos, o <strong>Variable Assignment</strong> e o <strong>IIFE</strong> podemos criar algo como:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">var</span> operacao <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    soma<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> num1<span class="token punctuation">,</span> num2 <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    subtracao<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> num1<span class="token punctuation">,</span> num2 <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> num1 <span class="token operator">-</span> num2<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>Nesse exemplo acima temos uma função auto executável anônima atribuída a variável <strong>operacao</strong>, nessa IIFE retornamos um objeto com duas funções atribuídas as chaves do objeto. Como nós estamos retornando um objeto podemos acessar essas funções com <strong>operacao.soma( 5, 5 )</strong> por exemplo.
É como se estivéssemos exportando essas funções que primeiramente estavam privadas dentro da IIFE para ser acessada através da variável <strong>operacao</strong>. Sendo assim podemos escolher o que queremos que permaneça privado e o que queremos tornar acessível.
Para deixar mais organizado podemos criar as funções separadas e retornar o objeto apenas com o nome da função desejada.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">var</span> operacao <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

  <span class="token comment" spellcheck="true">// função privada da IIFE</span>
  <span class="token keyword">function</span> <span class="token function">soma</span><span class="token punctuation">(</span> num1<span class="token punctuation">,</span> num2 <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">// função privada da IIFE</span>
  <span class="token keyword">function</span> <span class="token function">subtracao</span><span class="token punctuation">(</span> num1<span class="token punctuation">,</span> num2 <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> num1 <span class="token operator">-</span> num2<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    soma<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// retornando função soma a variável operacao</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

operacao<span class="token punctuation">.</span><span class="token function">soma</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 10</span>
operacao<span class="token punctuation">.</span><span class="token function">subtracao</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// operacao.subtracao is not a function</span>
</code></pre>
      </div>
<h3>Quer saber mais sobre IIFE ?</h3>
<ul>
<li><a href="http://benalman.com/news/2010/11/immediately-invoked-function-expression/">IIFE - benalman </a></li>
<li><a href="http://imasters.com.br/front-end/javascript/sobre-funcoes-imediatas-javascript-iife/">Sobre funções imediatas JavaScript</a></li>
<li><a href="http://www.bryanbraun.com/2014/11/27/every-possible-way-to-define-a-javascript-function">Every Possible Way to Define a Javascript Function</a></li>
</ul></div><ul class="tag-list" data-reactid="13"><li data-reactid="14"><a href="/undefined/tags/javascript" data-reactid="15">javascript</a></li></ul><div class="navigation" data-reactid="16"><a class="link link prev" href="/undefined/tirando-maior-proveito-do-sass.html" data-reactid="17"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;" data-reactid="18"><g data-reactid="19"><path d="m31.1 6.7l-11.8 11.9 11.8 11.8q0.5 0.4 0.5 1t-0.5 1l-3.7 3.7q-0.4 0.5-1 0.5t-1-0.5l-16.5-16.5q-0.5-0.4-0.5-1t0.5-1l16.5-16.6q0.5-0.4 1-0.4t1 0.4l3.7 3.7q0.5 0.4 0.5 1t-0.5 1z" data-reactid="20"></path></g></svg><!-- react-text: 21 --> <!-- /react-text --><!-- react-text: 22 -->Tirando maior proveito do SASS<!-- /react-text --></a><a class="link link next" href="/undefined/hello-world.html" data-reactid="23"><!-- react-text: 24 -->Hello World<!-- /react-text --><!-- react-text: 25 --> <!-- /react-text --><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;" data-reactid="26"><g data-reactid="27"><path d="m31.2 19.6l-16.6 16.5q-0.4 0.5-1 0.5t-1-0.5l-3.7-3.7q-0.4-0.4-0.4-1t0.4-1l11.9-11.8-11.9-11.9q-0.4-0.4-0.4-1t0.4-1l3.7-3.7q0.5-0.4 1-0.4t1 0.4l16.6 16.6q0.4 0.4 0.4 1t-0.4 1z" data-reactid="28"></path></g></svg></a></div></div></div></div><footer class="footer" data-reactid="29"><a class="footer-link" href="http://jeffersondaniel.com" data-reactid="30">Jefferson Daniel</a><!-- react-text: 31 --> - copyright @ 2017<!-- /react-text --></footer></div></div></body></html>